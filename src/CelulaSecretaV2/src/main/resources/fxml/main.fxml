<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<StackPane fx:id="rootPane" xmlns:fx="http://javafx.com/fxml"
           fx:controller="br.edu.ifsp.pep.controller.MainController"
           prefWidth="1366" prefHeight="768">

    <BorderPane>

        <!-- Chat lateral -->
        <left>
            <VBox spacing="20" BorderPane.alignment="CENTER_LEFT" prefWidth="296" prefHeight="561">
                <padding>
                    <Insets top="20" right="10" bottom="10" left="20"/>
                </padding>

                <Label text="Chat" style="-fx-font-size: 18;"/>

                <ScrollPane fx:id="chatScroll" fitToWidth="true" VBox.vgrow="ALWAYS" vvalue="1.0"
                            style="-fx-background-color: transparent;">
                    <VBox fx:id="chatBox" spacing="8" alignment="BOTTOM_LEFT"
                          style="-fx-background-color: transparent; -fx-padding: 10 20;"/>
                </ScrollPane>

                <HBox spacing="12">
                    <Button fx:id="btnSim" text="Sim"/>
                    <Button fx:id="btnNao" text="Não"/>
                </HBox>
            </VBox>
        </left>

        <!-- Grid de cartas 5x4 com espaçamento simétrico -->
        <center>
            <HBox alignment="CENTER" spacing="0">
                <GridPane fx:id="cardGrid" hgap="10" vgap="10">
                    <padding>
                        <Insets top="20" left="20" bottom="20" right="20"/>
                    </padding>
                </GridPane>
            </HBox>
        </center>

        <!-- Informacoes e botoes da equipe -->
        <right>
            <VBox spacing="20" alignment="TOP_CENTER">
                <padding>
                    <Insets top="30" right="20" bottom="20" left="10"/>
                </padding>

                <VBox spacing="10" alignment="CENTER">
                    <Label text="Sua Carta" style="-fx-font-size: 20;"/>
                    <ImageView fx:id="suaCartaImage" id="suaCartaImage"/>
                </VBox>

                <VBox spacing="10">
                    <Label text="Código da Sala"/>
                    <TextField fx:id="codigoSala" id="codigoSala" editable="false" style="-fx-text-alignment: center;"/>
                </VBox>

                <Button fx:id="btnPalpitar" id="btnPalpitar" text="Palpitar"/>
                <Button fx:id="btnPerguntar" id="btnPerguntar" text="Fazer Pergunta"/>
            </VBox>
        </right>
    </BorderPane>

    <VBox fx:id="zoomContainer" alignment="CENTER" styleClass="zoom-pane"
          maxWidth="220" maxHeight="330" managed="false" visible="false">
        <children>
            <ImageView fx:id="zoomCartaImageView" fitWidth="220" fitHeight="330" preserveRatio="true"/>
        </children>
    </VBox>

    <VBox fx:id="loadingOverlay" alignment="CENTER" spacing="20" style="-fx-background-color: rgba(40, 40, 40, 0.85);" visible="false">
        <children>
            <ProgressIndicator />
            <Label fx:id="loadingLabel" style="-fx-text-fill: white; -fx-font-size: 18px;" text="Estabelecendo conexão..." />
        </children>
    </VBox>

    <VBox fx:id="painelDesafio" alignment="TOP_CENTER" spacing="30" style="-fx-background-color: #394a46;"
          prefWidth="1000" prefHeight="700"
          visible="false" managed="false">
        <padding>
            <Insets top="30" right="50" bottom="50" left="50"/>
        </padding>

        <!-- Cabeçalho com Título e Contador -->
        <HBox alignment="CENTER" spacing="20">
            <Region HBox.hgrow="ALWAYS"/>
            <Label text="Desafio de Velocidade!" style="-fx-font-size: 32px; -fx-text-fill: #a0d4c8; -fx-font-weight: bold;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label fx:id="labelContador" styleClass="challenge-counter" text="1/10"/>
        </HBox>

        <Label fx:id="labelTimer" text="Tempo: 00:00" style="-fx-font-size: 24px; -fx-text-fill: #e0e5e4;"/>

        <VBox alignment="CENTER" style="-fx-background-color: #31413d; -fx-padding: 30; -fx-border-color: #a0d4c8; -fx-border-width: 2; -fx-border-radius: 15; -fx-background-radius: 15;"
              minHeight="150">
            <Label fx:id="labelPerguntaDesafio" text="Aqui vai a pergunta sobre a função da organela..."
                   style="-fx-font-size: 20px; -fx-text-fill: #e0e5e4;"
                   wrapText="true" textAlignment="CENTER"/>
        </VBox>

        <GridPane fx:id="gridOpcoesDesafio" hgap="25" vgap="25" alignment="CENTER">
            <columnConstraints>
                <ColumnConstraints halignment="CENTER" prefWidth="400"/>
                <ColumnConstraints halignment="CENTER" prefWidth="400"/>
            </columnConstraints>
            <rowConstraints>
                <RowConstraints valignment="CENTER" prefHeight="100"/>
                <RowConstraints valignment="CENTER" prefHeight="100"/>
            </rowConstraints>

        </GridPane>
    </VBox>
</StackPane>
